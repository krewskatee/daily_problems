def decoded_cipher_refactored(coded_message);decoded_sentence = [];alphabet = Array('a'..'z');cipher = Hash[alphabet.zip(alphabet.rotate(shift = -4))];coded_message.split("").each do |x|;cipher.each_key do |y|;if x == y then decoded_sentence << cipher[y] elsif x == "@" || x == "#" || x == "$" || x == "%"|| x == "^" || x == "&"|| x =="*" then decoded_sentence << " "; break;elsif x == "." || x == "!" || x == "?";decoded_sentence << x;break;end;end;end;return decoded_sentence.join("");end;puts "Decoding messages..." ;puts decoded_cipher_refactored("fi%wyvi%xs^hvmro^csyv#szepxmri"); puts decoded_cipher_refactored("asa,&csy^qywx#lezi^er@eajyp^psx$sj%jvii#xmqi&sr#csyv*lerhw!") ;puts decoded_cipher_refactored("xs*amr@xli%keqi,#csy@qywx#ompp&qi,&nslr#vsqivs."); puts decoded_cipher_refactored("izivcfshc*ks@xs*gsppiki,#wxyhc*levh,%wxyhc#levh."); puts decoded_cipher_refactored("ai@mrxirh^xs%fikmr&sr*xli&jmvwx^sj^jifvyevc@yrviwxvmgxih&wyfqevmri%aevjevi."); puts;puts "Running tests for `decoded_cipher`...";puts decoded_cipher_refactored("m^aerx%e&gsoi!") == "i want a coke!" ;puts decoded_cipher_refactored("hs%csy#pmoi*tmdde?") == "do you like pizza?";puts decoded_cipher_refactored("xskixliv^sv&rsx*ex#epp.") == "together or not at all." ;puts; puts "Finished running tests."
